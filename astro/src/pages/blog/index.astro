---
import Basic from "../../layouts/basic.astro";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";

const posts: CollectionEntry<"blog">[] = await getCollection("blog");
---

<Basic>
	<h1>Bloag</h1>
	<ul>
		{
			posts
				.sort(
					(a, b) =>
						new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
				)
				.map((post) => (
					<li id={post.slug}>
						<a href={`/blog/${post.slug}`}>{post.data.title}</a> -{" "}
						{post.data.date}
					</li>
				))
		}
	</ul>
</Basic>
