<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Terminal Typewriter - AlpineJS</title>
  <!-- Basic SEO -->
  <meta name="description"
    content="A developer-style terminal that reveals information with a typewriter effect. Click or press any key to begin." />
  <meta name="keywords"
    content="developer terminal, typewriter effect, personal portfolio, interactive resume, code presentation, web developer" />
  <meta name="author" content="Your Name" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Open Graph for social sharing -->
  <meta property="og:title" content="Interactive Developer Terminal" />
  <meta property="og:description"
    content="A stylish terminal with live typing animation to showcase your developer identity." />
  <meta property="og:image" content="https://alpinejs.pages.dev/assets/img/terminal-typewriter-preview.jpg" />
  <meta property="og:url" content="https://alpinejs.pages.dev/animations/terminal-typewriter" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Interactive Developer Terminal" />
  <meta name="twitter:description"
    content="An animated terminal-style introduction for web developers and creatives." />
  <meta name="twitter:image" content="https://alpinejs.pages.dev/assets/img/terminal-typewriter-preview.jpg" />

  <!-- Favicon -->
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine JS -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <style>
    .card {
      transform-style: preserve-3d;
    }

    .face {
      backface-visibility: hidden;
    }

    .light {
      position: absolute;
      width: 200%;
      height: 200%;
      top: -50%;
      left: -50%;
      pointer-events: none;
      background: radial-gradient(circle at var(--light-x, 50%) var(--light-y, 50%),
          rgba(255, 255, 255, 0.15),
          transparent 80%);
      opacity: 0;
      transition: opacity 0.3s ease-out;
    }

    .cursor {
      display: inline-block;
      animation: blink 1s step-start infinite;
    }

    @keyframes blink {

      0%,
      50% {
        opacity: 1;
      }

      50.01%,
      100% {
        opacity: 0;
      }
    }
  </style>
</head>

<body class="min-h-screen bg-gray-900 flex items-center justify-center p-4">

  <div class=" w-[422px] h-[302px] overflow-hidden rounded-lg" style="perspective:600px;">
    <div class="card absolute inset-0 transition-transform duration-500 ease-out cursor-default" x-data="typewriter()"
      x-init="init()" @keydown.window="startTyping($event)" @click="startTyping($event)">
      <div class="light"></div>

      <div class="face absolute inset-0 backdrop-blur-md rounded-md shadow-xl p-4 font-mono text-white
  overflow-hidden whitespace-pre-wrap flex items-start">

        <template x-if="stage === 0">
          <div class="flex items-center">
            <span class="text-gray-400 text-sm md:text-lg">Press any key to continue...</span>
            <span class="cursor text-gray-400 text-lg ml-2">_</span>
          </div>
        </template>

        <template x-if="stage !== 0">
          <div x-html="displayedHtml + (stage < 2 && cursorVisible ? '_' : '')"></div>
        </template>
      </div>
    </div>
  </div>

  <script>
    function typewriter() {
      return {
        raw: [
          `<span class="text-purple-400">const</span> `,
          `<span class="text-cyan-400">aboutMe</span> = {`,
          `\n  <span class="text-red-400">name</span>: <span class="text-green-400">'Luis David Gallo Dawson'</span>,`,
          `\n  <span class="text-red-400">job</span>: <a href="https://ctdevelopers.com/" target="_blank" class="text-green-400 no-underline">'Software Engineer'</a>,`,
          `\n  <span class="text-red-400">github</span>: <a href="https://github.com/luisdavidgd" target="_blank" class="text-green-400 no-underline">'@luisdavidgd'</a>,`,
          `\n  <span class="text-red-400">linkedin</span>: <a href="https://linkedin.com/in/luisdavidgd/" target="_blank" class="text-green-400 no-underline">'@luisdavidgd'</a>\n}`,
        ],
        flatChars: [],
        displayedHtml: '',
        stage: 0,
        cursorVisible: true,
        charIndex: 0,

        init() {
          // Aplanar el contenido HTML a una lista de caracteres
          this.flatChars = this.raw.join('').split('');
          // Blink cursor
          setInterval(() => {
            if (this.stage === 1 || this.stage === 2) {
              this.cursorVisible = !this.cursorVisible;
            }
          }, 500);
        },

        async startTyping(e) {
          if (this.stage !== 0) return;
          if (e.type === 'keydown' && ["Shift", "Control", "Alt", "Meta"].includes(e.key)) return;

          this.stage = 1;

          while (this.charIndex < this.flatChars.length) {
            this.displayedHtml += this.flatChars[this.charIndex++];
            await this.delay(this.randomDelay());
          }

          this.stage = 2;
        },

        delay(ms) {
          console.log(ms)
          return new Promise(resolve => setTimeout(resolve, ms));
        },

        randomDelay() {
          const fast = 10 + Math.random() * 10;
          const slow = 30 + Math.random() * 10;
          const char = this.flatChars[this.charIndex];
          if (char === '\n') return slow; // Saltos de línea más lentos
          if (char === ' ' || char === ',' || char === ':') return 20 + Math.random() * 10;;
          return fast;
        }
      }
    }
  </script>

</body>

</html>